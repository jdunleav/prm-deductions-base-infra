
resource "aws_instance" "test" {
    ami                             = "${data.aws_ami.amazon_linux_2.id}"
    instance_type                   = "t2.micro"
    vpc_security_group_ids          = ["${aws_security_group.test_sg.id}"]
    associate_public_ip_address     = true
    subnet_id                       = local.subnet_id
    key_name                        = aws_key_pair.ssh_key.key_name

    tags = {
        Name = "${var.component_name}-test"
    }
}

output "public_ip" {
    value = aws_instance.test.public_ip
}
